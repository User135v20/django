{% extends 'main/layout.html' %}

{% load static %}
{% block content %}
<style type="text/css">
table {
    max-width: 80%;
    height: auto;
    width: auto\9; /* ie8 */
    float: right;
}

</style>
{% if error_message %}
<p style="background-color:tomato;">{{ error_message }}</p>
{% endif %}

<h3> Снимки </h3>

<form action="{% url 'all_images' %}" method="GET">
    {% csrf_token %}
    <p>Фильтры:</p>
    <p>
        <label for="surname">Фамилия пользователя (загрузившего изображение)*: </label>
        <input id="surname" type="text" name="surname">
    </p>
    <p>
        <label>Наличие описания у снимка : </label>
        <input type="radio" name="description" value=True>есть;
        <input type="radio" name="description" value=False>нет;
    </p>
    <p>
        <label>Асимметрия строения\пигментации : </label>
        <input type="radio" name="structure_asymmetry" value=True>&#9745;
        <input type="radio" name="structure_asymmetry" value=False>&#9746;
    </p>
        <p>
        <label>Наличие бело-голубых структур : </label>
        <input type="radio" name="blue_white_structures" value=True>&#9745;
        <input type="radio" name="blue_white_structures" value=False>&#9746;
    </p>
    <p>
        <label>Атипичная пигментная сеть : </label>
        <input type="radio" name="atypical_pigment_network" value=True>&#9745;
        <input type="radio" name="atypical_pigment_network" value=False>&#9746;
    </p>
    <p>
        <label>Радиальная лучистость : </label>
        <input type="radio" name="radial_radiance" value=True>&#9745;
        <input type="radio" name="radial_radiance" value=False>&#9746;
    </p>
    <p>
        <label>Наличие точек : </label>
        <input type="radio" name="points" value=True>&#9745;
        <input type="radio" name="points" value=False>&#9746;
    </p>
    <p>
        <label>Диагноз : </label>
        <input id="diagnosis" type="text" name="diagnosis">
    </p>
    <input type="submit" value="filter">
</form>
<p> количество снимков {{ image_count }} </p>
{% if all_results_list %}
<form action="{% url 'download_images' %}" method="POST">
    {% csrf_token %}
    <input type="hidden" name="urls" value="{{ urls }}" />
    <button type="submit">cкачать всё</button>
</form>
<table>
    {% for image in all_results_list %}
    <tr class='success'>

        <p>Снимок {{ image.id }} (загружено пользователем {{ image.user.id }} ({{ image.user.surname }} {{ image.user.name }} {{ image.user.patronymic }} )) </p>
        <img src="{{ image.image.url}}" width="400" onclick="this.style.width='100%'"
             onmouseout="this.style.width='400px'">

    </tr>
    <tr>
    </tr>
    <p></p>
    <tr class='success'>
        <form action="{% url 'all_results' %}" method="GET">
            <input type="hidden" name="image_id" value="{{ image.id }}" />
            <input type="submit" value="посмотреть описание">
        </form>

        <form action="{% url 'create_result' %}" method="GET">
            <input type="hidden" name="image_id" value="{{ image.id }}" />
            <input type="submit" value="добавить описание">
        </form>
    </tr>
    <p></p>
    <tr class='success'>
        <form action="{% url 'download' %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="image_id" value="{{ image.image.url }}" />
            <button type="submit">cкачать</button>
        </form>

        <form action="{% url 'delete_image' pk=image.id %}" method="DELETE">
            {% csrf_token %}
            <input type="submit" value="удалить">
        </form>
    </tr>
    <p></p>
    {% endfor %}
</table>
{% else %}
<p>Снимки не найдены.</p>
{% endif %}

{% endblock %}